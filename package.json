{
    "name": "sfdx-code-analyzer-vscode",
    "displayName": "Salesforce Code Analyzer",
    "description": "Salesforce Code Analyzer is a unified tool for source code analysis. Run Code Analyzer to scan multiple languages in your code and add diagnostic info to your code that describes the violations.",
    "o11yUploadEndpoint": "https://794testsite.my.site.com/byolwr/webruntime/log/metrics",
    "enableO11y": "true",
    "bugs": {
        "url": "https://github.com/forcedotcom/code-analyzer/issues"
    },
    "repository": {
        "url": "https://github.com/forcedotcom/sfdx-code-analyzer-vscode"
    },
    "icon": "images/CodeAnalyzer-small.png",
    "galleryBanner": {
        "color": "#ECECEC",
        "theme": "light"
    },
    "version": "1.12.0",
    "publisher": "salesforce",
    "license": "BSD-3-Clause",
    "engines": {
        "vscode": "^1.90.0",
        "node": ">=20.9.0"
    },
    "categories": [
        "Programming Languages",
        "Linters",
        "Testing"
    ],
    "keywords": [
        "Salesforce Code Analyzer",
        "Code Analyzer",
        "SFCA"
    ],
    "dependencies": {
        "@salesforce/vscode-service-provider": "^1.5.0",
        "@types/jest": "^30.0.0",
        "@types/semver": "^7.7.1",
        "@types/tmp": "^0.2.6",
        "diff": "^5.2.0",
        "glob": "^11.1.0",
        "semver": "^7.7.2",
        "tmp": "^0.2.5"
    },
    "devDependencies": {
        "@eslint/js": "^9.35.0",
        "@types/diff": "^5.2.3",
        "@types/node": "^22.18.5",
        "@types/vscode": "^1.90.0",
        "@vscode/vsce": "^3.6.0",
        "esbuild": "^0.25.9",
        "eslint": "^9.35.0",
        "husky": "^9.1.7",
        "jest": "^30.1.3",
        "jest-mock-vscode": "^4.7.0",
        "ovsx": "^0.10.5",
        "proxyquire": "^2.1.3",
        "rimraf": "*",
        "ts-jest": "^29.4.2",
        "ts-node": "^10.9.2",
        "typescript": "^5.9.2",
        "typescript-eslint": "^8.44.0"
    },
    "extensionDependencies": [
        "salesforce.salesforcedx-vscode-core"
    ],
    "scripts": {
        "postinstall": "cd end-to-end && npm install && cd ..",
        "vscode:prepublish": "npm run package",
        "build": "npm run compile",
        "package": "npm run compile && npm run lint && node esbuild.js --production",
        "precompile": "tsc --build --clean && rimraf out",
        "compile": "tsc -p . --outDir out",
        "watch-tests": "tsc -p . -w --outDir out",
        "lint": "eslint src",
        "test": "npm run test:unit && npm run test:e2e",
        "pretest:unit": "tsc --build ./test/tsconfig.json --noEmit",
        "test:unit": "jest --coverage",
        "test:e2e": "cd end-to-end && npm run test && cd ..",
        "watch": "npm-run-all -p watch:*",
        "watch:esbuild": "node esbuild.js --watch",
        "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
        "clean": "npm run precompile && rimraf coverage",
        "showcoverage": "open ./coverage/unit/lcov-report/index.html",
        "prepare": "husky"
    },
    "activationEvents": [
        "workspaceContains:sfdx-project.json",
        "onLanguage:apex",
        "onLanguage:soql",
        "onLanguage:visualforce"
    ],
    "main": "./out/extension.js",
    "contributes": {
        "commands": [
            {
                "command": "sfca.runOnActiveFile",
                "title": "SFDX: Scan Current File with Code Analyzer"
            },
            {
                "command": "sfca.runOnSelected",
                "title": "SFDX: Scan Selected Files or Folders with Code Analyzer"
            },
            {
                "command": "sfca.removeDiagnosticsOnActiveFile",
                "title": "SFDX: Clear Code Analyzer Violations from Current File"
            },
            {
                "command": "sfca.removeDiagnosticsOnSelectedFile",
                "title": "SFDX: Clear Code Analyzer Violations from Selected Files or Folders"
            },
            {
                "command": "sfca.runApexGuruAnalysisOnSelectedFile",
                "title": "SFDX: Scan Selected File for Performance Issues with ApexGuru"
            },
            {
                "command": "sfca.runApexGuruAnalysisOnCurrentFile",
                "title": "SFDX: Scan Current File for Performance Issues with ApexGuru"
            }
        ],
        "configuration": [
            {
                "title": "General",
                "properties": {
                    "codeAnalyzer.analyzeOnSave.enabled": {
                        "type": "boolean",
                        "default": false,
                        "description": "Scan files on save automatically."
                    },
                    "codeAnalyzer.analyzeOnOpen.enabled": {
                        "type": "boolean",
                        "default": false,
                        "description": "Scan files on open automatically."
                    }
                }
            },
            {
                "title": "Configuration",
                "properties": {
                    "codeAnalyzer.configFile": {
                        "type": "string",
                        "default": "",
                        "markdownDescription": "Path to a [Code Analyzer configuration file](https://developer.salesforce.com/docs/platform/salesforce-code-analyzer/guide/config-custom.html) used to customize the engines and rules.\n\nCode Analyzer has an internal default configuration for its rule and engine properties. If you want to override these defaults, you can either add a 'code-analyzer.yml' or 'code-analyzer.yaml' file at the root of your project or explicitly specify your configuration file path with this setting.\n\nThis setting is equivalent to the `--config-file` flag of the CLI commands. See [configuration schema](https://developer.salesforce.com/docs/platform/salesforce-code-analyzer/guide/config-toplevel.html)."
                    },
                    "codeAnalyzer.ruleSelectors": {
                        "type": "string",
                        "default": "Recommended",
                        "markdownDescription": "Selection of rules used to scan your code with Code Analyzer.\n\nSelect rules using their name, engine name, severity level, tag, or a combination. Use commas for unions (such as \"Security,Performance\") and colons for intersections (such as \"pmd:Security\" or \"eslint:3\").\n\nThis setting is equivalent to the `--rule-selector` flag of the CLI commands. See [examples](https://developer.salesforce.com/docs/atlas.en-us.sfdx_cli_reference.meta/sfdx_cli_reference/cli_reference_code-analyzer_commands_unified.htm#cli_reference_code-analyzer_rules_unified)."
                    }
                }
            }
        ],
        "menus": {
            "commandPalette": [
                {
                    "command": "sfca.runOnActiveFile",
                    "when": "sfca.extensionActivated"
                },
                {
                    "command": "sfca.runOnSelected",
                    "when": "false"
                },
                {
                    "command": "sfca.removeDiagnosticsOnActiveFile",
                    "when": "sfca.extensionActivated"
                },
                {
                    "command": "sfca.removeDiagnosticsOnSelectedFile",
                    "when": "false"
                },
                {
                    "command": "sfca.runApexGuruAnalysisOnSelectedFile",
                    "when": "false"
                },
                {
                    "command": "sfca.runApexGuruAnalysisOnCurrentFile",
                    "when": "sfca.extensionActivated && sfca.shouldShowApexGuruButtons && resourceExtname =~ /\\.cls|\\.trigger|\\.apex/"
                }
            ],
            "editor/context": [
                {
                    "command": "sfca.runOnActiveFile",
                    "when": "sfca.extensionActivated"
                },
                {
                    "command": "sfca.removeDiagnosticsOnActiveFile",
                    "when": "sfca.extensionActivated"
                },
                {
                    "command": "sfca.runApexGuruAnalysisOnCurrentFile",
                    "when": "sfca.extensionActivated && sfca.shouldShowApexGuruButtons && resourceExtname =~ /\\.cls|\\.trigger|\\.apex/"
                }
            ],
            "explorer/context": [
                {
                    "command": "sfca.runOnSelected",
                    "when": "sfca.extensionActivated"
                },
                {
                    "command": "sfca.removeDiagnosticsOnSelectedFile",
                    "when": "sfca.extensionActivated"
                },
                {
                    "command": "sfca.runApexGuruAnalysisOnSelectedFile",
                    "when": "sfca.extensionActivated && sfca.shouldShowApexGuruButtons && explorerResourceIsFolder == false && resourceExtname =~ /\\.cls|\\.trigger|\\.apex/"
                }
            ]
        },
        "languages": [
            {
                "id": "apex",
                "aliases": [
                    "Apex",
                    "apex"
                ],
                "extensions": [
                    ".cls",
                    ".trigger",
                    ".soql",
                    ".apex"
                ]
            }
        ]
    }
}
